"use strict";(self.webpackChunk_tumblr_redpop=self.webpackChunk_tumblr_redpop||[]).push([[6560],{76636:(e,t,r)=>{r.d(t,{Z:()=>g});var a=r(54138),s=r.n(a),n=r(54589),o=r.n(n),i=r(95004),l=r(6790),c=r(65214),u=r(43523),d=r(78667),h=r(92816),m=r(8156),p=r(2629),b=["routeQueryProps","onClick"];const g=e=>{var t=e.routeQueryProps,r=e.onClick,a=o()(e,b),n=(0,d.bp)(),g=n.isLoggedIn,v=n.logEvent,f=(0,i.useRef)(null),x=(0,m.Z)(t),w=()=>(0,c.TL)({},x);return(0,p.jsx)(l.ZP,{hotkey:{key:l.SV.C,command:()=>{var e;null===(e=f.current)||void 0===e||e.click()},modifiers:{[l.TE.Alt]:!0}},children:(0,p.jsx)(h.Z,s()(s()({},a),{},{getPath:w,onClick:e=>{v({eventName:u.J.PFComposePost}),null==r||r(e)},forwardedRef:f,isAlreadyOnPostFormPath:c.Lv,disableNavigation:!g},!g&&{"data-login-wall-type":"newTaggedPost","data-login-wall-page":"floating","data-login-wall-tag-label":x.tags,"data-login-wall-redirect":"/dashboard","data-login-wall-destination":(0,c.fO)(x.tags||""),"data-login-wall-new-post-path":w()}))})}},28396:(e,t,r)=>{r.d(t,{Z:()=>de});var a=r(54138),s=r.n(a),n=r(5754),o=r.n(n),i=r(76636),l=r(2487),c=r(52870),u=r(69654),d=r(10689),h=r(85768),m=r(63764),p=r(93390),b=r(31872),g=r(85895),v=r(26503),f=r(65214),x=r(32468),w=r(51826),y=r(18046),T=r(32089),k=r(43523),j=r(78667),S=r(93099),C=r(73971),P=r(82449),N=r(80293);const M=(0,N.Z)((()=>Promise.all([r.e(1219),r.e(970)]).then(r.bind(r,32775))),"AsyncAccountPopover"),Z=(0,N.Z)((()=>Promise.all([r.e(5541),r.e(7023),r.e(3981)]).then(r.bind(r,48571))),"AsyncActivityPopover");var L=r(79615),B=r(23670),F=r(64186);const A="KTRcB",E="PK7qG",H="B1L2M",_="cckUS";var O=r(2629);const I=e=>{var t=e.children,r=e.label,a=e.isActive,s=e.link,n=e.useRouter,i=e.notificationCount,l=void 0===i?0:i,c=e.notificationStatus,u=(0,O.jsxs)(O.Fragment,{children:[(0,O.jsx)(L.Z,{wrapperClassName:H,className:o()(E,{[_]:a}),label:r,children:t}),l>0&&(0,O.jsx)(F.Z,{count:l,showNumber:!0}),c&&(0,O.jsx)(F.Z,{count:1,showNumber:!1,isCircle:!0,style:{top:-9,right:-9}})]});return(0,O.jsx)("div",{className:A,children:n?(0,O.jsx)(B.Z,{to:s,tabIndex:-1,children:u}):(0,O.jsx)("a",{href:s,tabIndex:-1,children:u})})};var W=r(50209),R=r.n(W),D=r(95004),z=r(8535);class q extends D.Component{constructor(){super(...arguments),R()(this,"state",{error:null})}static getDerivedStateFromError(e){return{error:e}}render(){var e=this.state.error;return e?this.props.FallbackComponent?(0,O.jsx)(this.props.FallbackComponent,{error:e}):null:this.props.children}}var U=r(9557),G=r(62412),J=r(43684),K=e=>{var t=e.children,r=e.label,a=e.isActive,s=e.notificationCount;return(0,O.jsxs)(L.Z,{wrapperClassName:H,label:r,children:[(0,O.jsx)("span",{className:o()(E,{[_]:a}),children:t}),(0,O.jsx)(F.Z,{count:s})]})};const Q=e=>{var t=(0,j.bp)().logEvent,r=e.label,a=e.componentWidth,n=e.componentMaxHeight,o=e.component,i=e.showOverflowY,l=e.controlledPopoverProps,c={showOverflowY:i,component:(0,O.jsx)(q,{children:o},r),height:"auto",position:J.I2.Bottom,width:a,isFlipEnabled:!1,maxHeight:n,closeForAllExternalClicks:!0,onOpen:()=>t({eventName:e.krakenEvent})};return(0,O.jsx)("div",{className:A,children:l?(0,O.jsx)(G.ZP,s()(s()(s()({},c),l),{},{children:K(e)})):(0,O.jsx)(U.Z,s()(s()({},c),{},{children:K(e)}))})},Y="GcA7R";class $ extends D.Component{constructor(){super(...arguments),R()(this,"state",{isOpen:!1}),R()(this,"toggle",(()=>this.setState((e=>({isOpen:!e.isOpen})))))}render(){var e=this.props.popoverMenuItemProps,t=this.state.isOpen;return(0,O.jsx)(Q,s()(s()({},e),{},{controlledPopoverProps:{isOpen:t,toggle:this.toggle},component:(0,O.jsx)("div",{className:Y,children:(0,O.jsx)(z.Z,{})})}))}}const V="hlDot",X="C38Rc",ee="hvZ5A",te="_3kR_",re="rllUD",ae="nzmrE",se="BY8m2",ne="yTPpj",oe="uuWZ2",ie="QOMh2",le="xxqHJ";var ce={width:22,height:22},ue=e=>{var t=e.activePage,r=e.headerTheme,a=e.showLimitedHeader,n=e.transparentBackground,N=e.hardLinkNavigation,L=e.blogName,B=e.inboxStatus,F=e.unseenPostCount,A=e.notificationCount,E=e.unreadMessagesCount,H=e.privateGroupBlogUnreadPostCount,_=e.hideLoggedOutButtons,W=e.hideLoginButton,R=e.hideSignUpButton,D=e.logoUrl,z=e.registrationSource,q=(0,j.bp)(),U=q._t,G=q.isLoggedIn,J="";(0,x.eh)(t)&&t.extraAttributes&&(J=t.extraAttributes.searchTerm);var K,Y=!a&&(0,O.jsxs)("div",{className:oe,children:[(0,O.jsx)(v.Z,{}),(0,O.jsx)(I,{link:f.o_.dashboard,useRouter:!0,label:U("Home"),isActive:(0,x.fR)(t),notificationCount:F,children:(0,O.jsx)(u.Z,{size:{width:20,height:21}})}),(0,O.jsx)(I,{useRouter:!0,link:(0,S.Z)(f.o_.exploreByMode,{exploreMode:y.Ru.Recommended}),label:U("Explore"),isActive:(0,x.J8)(t),children:(0,O.jsx)(c.Z,{size:ce})}),(0,O.jsx)(I,{link:f.o_.inbox,useRouter:!0,label:U("Inbox"),isActive:(0,x.GT)(t),notificationStatus:B,children:(0,O.jsx)(h.Z,{size:{width:23,height:21}})}),(0,O.jsx)($,{popoverMenuItemProps:{children:(0,O.jsx)(m.Z,{size:ce}),componentWidth:280,componentMaxHeight:490,label:U("Messaging"),isActive:(0,x.ww)(t),showOverflowY:!0,notificationCount:E,krakenEvent:k.J.MessagesPopover}}),(0,O.jsx)(Q,{component:(0,O.jsx)(Z,{}),componentWidth:380,componentMaxHeight:"90vh",label:U("Activity"),isActive:(0,x.fu)(t),notificationCount:A,showOverflowY:!0,krakenEvent:k.J.ActivityPopover,children:(0,O.jsx)(d.Z,{size:{width:14,height:21}})}),(0,O.jsx)(Q,{component:(0,O.jsx)(M,{activePage:t}),componentWidth:240,componentMaxHeight:"90vh",label:U("Account"),isActive:(0,x.G8)(t),notificationCount:H,krakenEvent:k.J.AccountPopover,children:(0,O.jsx)(b.Z,{size:{width:15,height:21}})}),(0,O.jsx)(i.Z,{label:U("New post"),className:le,routeQueryProps:{blogName:L,isPageBlogPage:(0,x.Sr)(t),composeSettings:(0,w.W)(t)},children:(0,O.jsx)(p.Z,{size:{height:22,width:22}})})]}),ue=!_&&(0,O.jsx)("div",{className:o()(oe,ne),children:(0,O.jsx)(P.Z,{theme:T.yS[r],hideLoginButton:W,hideSignUpButton:R,registrationSource:z,loginButtonStyle:{marginRight:10}})}),de=G?Y:ue;K=D?(0,O.jsx)(l.Z,{hardLinkHome:N,logoUrl:D}):(0,O.jsx)(C.Z,{theme:r,hardLinkHome:N,animatedGradientOnHover:!n});var he=n||r===T.Ov.Transparent||r===T.Ov.TransparentDark;return(0,O.jsx)("div",{className:o()({[X]:n,[V]:!n,[ee]:he}),children:(0,O.jsxs)("header",{className:te,children:[(0,O.jsxs)("div",{className:o()(re,{[se]:!de}),children:[(0,O.jsx)("div",{className:ie,children:K}),(0,O.jsx)(g.Z,s()({className:ae,initialSearchTerm:J,hardLinkToSearchPage:N},a&&{enableTypeahead:!0}))]}),de]})})};ue.defaultProps={headerTheme:T.Ov.Light,unseenPostCount:0,notificationCount:0,privateGroupBlogUnreadPostCount:0,unreadMessagesCount:0,inboxCount:0};const de=ue},2487:(e,t,r)=>{r.d(t,{Z:()=>l});var a=r(95004),s=r(23670),n=r(43523),o=r(78667),i=r(2629);const l=function(e){var t=e.hardLinkHome,r=e.logoUrl,l=(0,o.bp)(),c=l.isLoggedIn,u=l._t,d=l.logEvent,h=(0,i.jsx)("div",{children:(0,i.jsx)("img",{src:r,alt:"Logo"})}),m=u("Home"),p=t||!c?"/":"/dashboard",b=(0,a.useCallback)((()=>{d({eventName:n.J.LogoClick,eventDetails:{destination:p}})}),[p]);return t||!c?(0,i.jsx)("a",{href:p,"aria-label":m,onClick:b,children:h}):(0,i.jsx)(s.Z,{to:p,"aria-label":m,onClick:b,children:h})}},73971:(e,t,r)=>{r.d(t,{Z:()=>k});var a=r(54138),s=r.n(a),n=r(5754),o=r.n(n),i=r(95004),l=r(46773),c=r(23670),u=r(32089),d=r(43523),h=r(78667),m=r(63583),p=r.n(m);const b="Ovlgo",g="FQkf4",v="FP6oS",f="GjGsN",x="tSe6h";var w,y=r(2629),T=(null===(w=l.Z.defaultProps)||void 0===w?void 0:w.size)||{width:0,height:0};const k=function(e){var t=e.size,r=e.theme,a=e.hardLinkHome,n=e.animatedGradientOnHover,m=void 0!==n&&n,w=(0,h.bp)(),k=w.isLoggedIn,j=w._t,S=w.features,C=w.logEvent,P=(0,y.jsxs)("div",{className:o()(g,{[x]:m,[b]:S.prideMonthLogoAnimation}),style:{width:"".concat((null==t?void 0:t.width)||T.width,"px"),height:"".concat((null==t?void 0:t.height)||T.height,"px")},children:[(0,y.jsx)("div",{className:v}),(0,y.jsx)(l.Z,s()({className:f,colors:{primary:void 0!==r&&[u.Ov.Light,u.Ov.Transparent].includes(r)?p().paletteWhiteOnDark:p().paletteBlack}},t&&{size:t}))]}),N=j("Home"),M=a||!k?"/":"/dashboard",Z=(0,i.useCallback)((()=>{C({eventName:d.J.LogoClick,eventDetails:{destination:M}})}),[M]);return a||!k?(0,y.jsx)("a",{href:M,"aria-label":N,onClick:Z,children:P}):(0,y.jsx)(c.Z,{to:M,"aria-label":N,onClick:Z,children:P})}},82449:(e,t,r)=>{r.d(t,{Z:()=>y});var a=r(54138),s=r.n(a),n=r(95004),o=r(86179),i=r(90891),l=r(65214),c=r(32089),u=r(42580),d=r(43523),h=r(64633),m=r(78667),p=r(58849),b=r(89465),g=r(63583),v=r(92023),f=r(71581),x=(e,t)=>!!e[f.T.LoginWall]&&((0,l.lc)(t)||(0,l.tc)(t)||(0,v.vr)(t)),w=r(2629);const y=function(e){var t,r,a,v=e.theme,f=e.hardLinkNavigation,y=e.hideLoginButton,T=e.hideSignUpButton,k=e.registrationSource,j=e.loginButtonStyle,S=e.signUpButtonStyle,C=e.disableLoginWall,P=(0,m.bp)(),N=P._t,M=P.logEvent,Z=P.features,L=P.wwwBaseUrl,B=(0,p.h)().openLoginWall,F=(0,o.TH)(),A=F.pathname,E=F.search,H=(0,n.useCallback)((()=>M({eventName:d.J.ClickSignup})),[]),_=(0,n.useCallback)((()=>M({eventName:d.J.ClickLogin})),[]),O=(0,n.useCallback)((e=>{null==e||e.preventDefault(),B({form:u.c.Login,redirect:A})}),[]),I=(0,n.useCallback)((e=>{null==e||e.preventDefault(),B({form:u.c.Register})}),[]),W=!C&&x(Z,A)?O:_,R=!C&&x(Z,A)?I:H,D=f&&"_blank",z=f?L:"",q=new URLSearchParams(E).get("redirect_to")||void 0;switch(k||(k=(0,b.k)(A,h.Vu.HeaderSignUpButton)),v){case c.p3.TransparentDark:r={backgroundColor:g.transparentBlack15,textColor:g.paletteBlack},a={backgroundColor:g.black,textColor:g.transparentWhite50},t={mixBlendMode:"hard-light"};break;case c.p3.Greyscale:r={backgroundColor:g.paletteBlack,textColor:g.gray40},a={backgroundColor:g.gray40,textColor:g.paletteBlack};break;default:r={backgroundColor:g.glassGreen,textColor:"#000000"},a={backgroundColor:g.dreamcastBlue,textColor:"#000000"}}return(0,w.jsxs)(w.Fragment,{children:[!y&&(0,w.jsx)(i.Z,s()(s()(s()({href:"".concat(z).concat((0,l.gZ)({formToShow:u.c.Login},{redirect_to:q})),feature:!1,size:"small",onClick:W,style:j},D&&{target:D}),r),{},{children:N("Log in")})),!T&&(0,w.jsx)(i.Z,s()(s()(s()(s()({href:"".concat(z).concat((0,l.gZ)({formToShow:u.c.Register},{source:k,redirect_to:q})),feature:!1,size:"small",onClick:R,style:S},D&&{target:D}),a),t&&{style:t}),{},{children:N("Sign up")}))]})}},52870:(e,t,r)=>{r.d(t,{Z:()=>s});var a=(0,r(36343).q)("explore");a.defaultProps={size:{width:22,height:24}};const s=a},69654:(e,t,r)=>{r.d(t,{Z:()=>s});var a=(0,r(36343).q)("home");a.defaultProps={size:{width:20,height:21}};const s=a},10689:(e,t,r)=>{r.d(t,{Z:()=>s});var a=(0,r(36343).q)("lightning");a.defaultProps={size:{width:24,height:24}};const s=a},46773:(e,t,r)=>{r.d(t,{Z:()=>W});var a=r(54138),s=r.n(a);const n=r.p+"src/assets/icons/t-autumn-da04e6b3.svg",o=r.p+"src/assets/icons/t-fieri-c6b99eb1.svg",i=r.p+"src/assets/icons/t-goth-67b7c2e4.svg",l=r.p+"src/assets/icons/t-groundhog-9b4056ee.svg",c=r.p+"src/assets/icons/t-hauntober-week2-6728dffd.svg",u=r.p+"src/assets/icons/t-hauntober-week3-075e6593.svg",d=r.p+"src/assets/icons/t-hauntober-week4-864d79f7.svg",h=r.p+"src/assets/icons/t-hauntober-week5-7d6a09d5.svg",m=r.p+"src/assets/icons/t-hauntober-week6-51883d2c.svg",p=r.p+"src/assets/icons/t-hauntober-week7-3393c7d1.svg",b=r.p+"src/assets/icons/t-newyear-888a152e.svg";var g=r(36343),v=r(78667),f=r(30744);const x="pLlmK",w="cAXgS",y="j8DVV",T="laOaa",k="o62EC",j="BC46D",S="_XSLr";var C=r(2629),P=(0,g.q)("logo-t"),N=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:y,role:e.role,src:i,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo in a gothic font")})},M=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:w,role:e.role,src:l,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo with a groundhog coming out of its hole")})},Z=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:x,role:e.role,src:o,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo that looks like guy fieri")})},L=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:T,role:e.role,src:n,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo with fall leaves around")})},B=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:T,role:e.role,src:c,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo in a crystal ball")})},F=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:T,role:e.role,src:u,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo with a moon and stars")})},A=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:j,role:e.role,src:d,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo in a pumpkin")})},E=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:k,role:e.role,src:h,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo with bat wings and eyes")})},H=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:T,role:e.role,src:m,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo on tarot cards")})},_=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:T,role:e.role,src:p,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo with devil horns, tail and eyes")})},O=e=>{var t=(0,v.bp)()._c;return(0,C.jsx)("img",{className:S,role:e.role,src:b,alt:t("Alternate text for a special tumblr t logo","Tumblr t logo with fireworks")})},I=e=>{var t,r=null!==(t=e.role)&&void 0!==t?t:"presentation",a=(0,v.bp)().features,n=(a=void 0===a?{}:a).redpopFieriLogo,o=a.redpopGroundhogLogo,i=a.redpopGothLogo,l=a.redpopAutumnLogo,c=a.redpopHauntoberWeek2,u=a.redpopHauntoberWeek3,d=a.redpopHauntoberWeek4,h=a.redpopHauntoberWeek5,m=a.redpopHauntoberWeek6,p=a.redpopHauntoberWeek7,b=a.redpopNewYear2022Logo,g=a.tellMeLiesEvent;return i?(0,C.jsx)(N,{role:r}):o?(0,C.jsx)(M,{role:r}):n?(0,C.jsx)(Z,{role:r}):l?(0,C.jsx)(L,{role:r}):c?(0,C.jsx)(B,{role:r}):u?(0,C.jsx)(F,{role:r}):d?(0,C.jsx)(A,{role:r}):h?(0,C.jsx)(E,{role:r}):m?(0,C.jsx)(H,{role:r}):p?(0,C.jsx)(_,{role:r}):b?(0,C.jsx)(O,{role:r}):g?(0,C.jsx)(f.Z,s()(s()({},e),{},{role:r,size:{width:30,height:33}})):(0,C.jsx)(P,s()({},e))};I.defaultProps={size:{width:20,height:33}};const W=I},85768:(e,t,r)=>{r.d(t,{Z:()=>s});var a=(0,r(36343).q)("mail");a.defaultProps={size:{width:23,height:24}};const s=a},63764:(e,t,r)=>{r.d(t,{Z:()=>p});var a=r(54138),s=r.n(a),n=r(54589),o=r.n(n),i=r(36343),l=r(66498),c=r(14544),u=r(2629),d=["forceVariant"],h={default:(0,i.q)("messaging"),ghost:(0,i.q)("messaging-ghost"),pumpkin:(0,i.q)("messaging-pumpkin"),vampire:(0,i.q)("messaging-vampire")},m=e=>{var t=e.forceVariant,r=o()(e,d),a=(0,c.M)(),n=t;n||(n=(null==a?void 0:a.name)===l.Z.ghost?"ghost":(null==a?void 0:a.name)===l.Z.vampire?"vampire":(null==a?void 0:a.name)===l.Z.pumpkin?"pumpkin":"default");var i=h[n];return(0,u.jsx)(i,s()({},r))};m.defaultProps={size:{width:21,height:21}};const p=m},93390:(e,t,r)=>{r.d(t,{Z:()=>s});var a=(0,r(36343).q)("post");a.defaultProps={size:{width:24,height:24}};const s=a},30744:(e,t,r)=>{r.d(t,{Z:()=>s});var a=(0,r(36343).q)("tumblr-flower-logo");a.defaultProps={size:{width:24,height:24}};const s=a},8535:(e,t,r)=>{r.d(t,{Z:()=>a});const a=(0,r(80293).Z)((()=>Promise.all([r.e(2470),r.e(8236),r.e(4051),r.e(4465)]).then(r.bind(r,74675))),"AsyncMessaging")},85895:(e,t,r)=>{r.d(t,{Z:()=>D});var a=r(54138),s=r.n(a),n=r(17276),o=r.n(n),i=r(99077),l=r.n(i),c=r(50209),u=r.n(c),d=r(5754),h=r.n(d),m=r(95004),p=r(79153),b=r(6790),g=r(19486),v=r(13434),f=r(62412),x=r(65214),w=r(43684),y=r(81584),T=r(44655),k=r(59215),j=r(42914),S=r(58546),C=r(96488),P=r(63583),N=r.n(P),M=r(39277);const Z=(0,r(80293).Z)((()=>r.e(4998).then(r.bind(r,47487))),"AsyncTypeaheadDropdown"),L="Mw2UR",B="oPa7v",F="Z3WPg",A="NaqPB",E="aogHd",H="GT10N";var _=r(2629);class O extends m.Component{constructor(){var e;super(...arguments),e=this,u()(this,"state",{searchKeyword:this.props.initialSearchTerm,followedTags:[],searchTags:[],searchBlogs:[],isOpen:!1,hasFocus:!1,hasRequestedFollowedTags:!1,isLoading:!1}),u()(this,"debounceDelay",250),u()(this,"debouncedTypeaheadSearch",(0,j.Z)(this.typeaheadSearch,this.debounceDelay)),u()(this,"inputRef",(0,m.createRef)()),u()(this,"apiHelper",(0,y.ZP)(this.props.appContext.apiFetch)),u()(this,"renderSearchForm",(()=>{var e=this.props,t=e.appContext,r=t._t,a=t.wwwBaseUrl,s=e.autoCapitalize,n=void 0===s?"on":s,o=this.state,i=o.searchKeyword,l=o.hasFocus,c=o.isLoading;return(0,_.jsx)("form",{method:"GET",action:"".concat(a,"/search"),role:"search",className:E,onSubmit:this.submitForm,children:(0,_.jsxs)("div",{className:B,children:[(0,_.jsx)("div",{className:F,children:(0,_.jsx)(g.Z,{size:{width:18,height:18}})}),(0,_.jsx)(b.ZP,{hotkey:{key:b.SV.Slash,command:this.focus,modifiers:{[b.TE.Shift]:!0},allowInputs:!0},disable:l?b.z9:[],children:(0,_.jsx)("input",{name:"q",type:"text",autoComplete:"off",ref:this.inputRef,value:i,"aria-label":r("Search"),className:A,placeholder:r("Search Tumblr"),onBlur:this.onInputBlur,onFocus:this.onInputFocus,onChange:this.onInputChange,autoCapitalize:n})}),c&&(0,_.jsx)("div",{className:H,children:(0,_.jsx)(v.Z,{small:!0,centerOrientation:v.Q.HorizontalAndVertical,color:N().paletteTransparentWhite65})})]})})})),u()(this,"handleKeydownEvent",(e=>t=>{var r,a,s=t.key;if(["ArrowUp","ArrowDown"].includes(s)){null===(r=t.preventDefault)||void 0===r||r.call(t);var n,o=Array.from(null==e?void 0:e.getElementsByTagName("a")),i=null==o?void 0:o.indexOf(document.activeElement);if("ArrowDown"===s?i++:i--,i<0)null===(n=this.inputRef.current)||void 0===n||n.focus();else i>=o.length&&(i=0),null===(a=o[i])||void 0===a||a.focus()}})),u()(this,"onInputChange",(e=>{var t=e.target.value;return this.setState({searchKeyword:t},(()=>this.props.enableTypeahead&&this.debouncedTypeaheadSearch()))})),u()(this,"onInputFocus",(()=>{var e=this.props,t=e.enableTypeahead,r=e.appContext.isLoggedIn,a=this.state.hasRequestedFollowedTags;this.setState({hasFocus:!0}),t&&!a&&r&&this.requestFollowedTags()})),u()(this,"onInputBlur",(()=>this.setState({hasFocus:!1}))),u()(this,"onSearchBarBlur",function(){var t=l()(o()().mark((function t(r){return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.isTypeaheadFullscreen){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,(0,C.Z)(r);case 4:if(t.sent){t.next=6;break}e.onControlledPopoverClose();case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),u()(this,"renderSearchFormWithTypeahead",(()=>{var e=this.state.isOpen,t=this.props,r=t.isTypeaheadFullscreen,a=t.glassContext.glassContainerRef;return r?(0,_.jsxs)(_.Fragment,{children:[this.renderSearchForm(),e&&this.hasResults()&&a&&(0,p.createPortal)(this.renderTypeahead(),a)]}):(0,_.jsx)(f.ZP,{isOpen:e,skipClickToOpen:!0,toggle:this.onControlledPopoverClose,tabIndex:-1,width:"100%",height:"auto",maxHeight:"70vh",type:w.Oj.Click,component:this.renderTypeahead(),handleKeydownEvent:this.handleKeydownEvent,children:this.renderSearchForm()})})),u()(this,"renderTypeahead",(()=>{var e=this.props.isTypeaheadFullscreen,t=this.state,r=t.followedTags,a=t.searchTags,s=t.searchBlogs,n=t.searchKeyword;return(0,_.jsx)(Z,{followedTags:r,tags:a,blogs:s,query:n,isFullscreen:e,closeContainingPopover:this.onControlledPopoverClose})})),u()(this,"onControlledPopoverClose",(()=>{this.inputRef.current&&this.inputRef.current.blur(),this.setState({isOpen:!1})})),u()(this,"focus",(()=>this.inputRef.current&&this.inputRef.current.focus())),u()(this,"submitForm",(e=>{var t,r=this.props,a=r.hardLinkToSearchPage,s=r.appContext.wwwBaseUrl;e.preventDefault();var n=e.target.querySelector('input[name="q"]'),o=null==n||null===(t=n.value)||void 0===t?void 0:t.trim(),i=o?(0,x.W8)(o):"/explore/";if(a){var l="".concat(s).concat(i);location.assign(l)}else this.props.navigate(i),this.onControlledPopoverClose()})),u()(this,"hasResults",(()=>{var e=this.state,t=e.followedTags,r=e.searchTags,a=e.searchBlogs;return!(0,S.Q)(t)||!(0,S.Q)(r)||!(0,S.Q)(a)}))}componentDidUpdate(e){this.updateOpenState(),this.props.initialSearchTerm!==e.initialSearchTerm&&this.setState({searchKeyword:this.props.initialSearchTerm})}componentDidMount(){this.props.autoFocus&&this.focus(),""!==this.state.searchKeyword&&this.debouncedTypeaheadSearch()}render(){var e=this.props,t=e.className,r=e.enableTypeahead;return(0,_.jsx)("div",{className:h()(L,t),onBlur:this.onSearchBarBlur,children:r?this.renderSearchFormWithTypeahead():this.renderSearchForm()})}typeaheadSearch(){var e=this;return l()(o()().mark((function t(){var r,a,s,n,i;return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.state.searchKeyword)){t.next=12;break}return e.setState({isLoading:!0}),t.next=5,(0,T.on)(e.props.appContext.apiFetch,r).fetch();case 5:a=t.sent,s=a.response,n=s.tags,i=s.blogs,e.setState({searchTags:null!=n&&n.length?n:[{tag:r}],searchBlogs:i||[],isLoading:!1}),t.next=13;break;case 12:e.setState({searchTags:[],searchBlogs:[],isLoading:!1});case 13:case"end":return t.stop()}}),t)})))()}requestFollowedTags(){var e=this;return l()(o()().mark((function t(){var r,a;return o()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({hasRequestedFollowedTags:!0,isLoading:!0}),t.next=3,e.apiHelper.getTags().fetch();case 3:r=t.sent,a=r.response.tags,e.setState({followedTags:a||[],isLoading:!1});case 6:case"end":return t.stop()}}),t)})))()}updateOpenState(){var e=this.state,t=e.isOpen,r=e.hasFocus;!t&&r&&this.hasResults()&&this.setState({isOpen:!0})}}u()(O,"defaultProps",{enableTypeahead:!0,isTypeaheadFullscreen:!1,autoFocus:!1,initialSearchTerm:""});var I=(0,k.X9)(O,{appContext:!0,glassContext:!0}),W=(0,M.Z)(I);class R extends m.Component{render(){return(0,_.jsx)(W,s()({},this.props))}}u()(R,"defaultProps",O.defaultProps);const D=R},26503:(e,t,r)=>{r.d(t,{Z:()=>je});var a=r(33970),s=r.n(a),n=r(5754),o=r.n(n),i=r(95004),l=r(86179),c=r(87674),u=r(90891),d=r(54382),h=r(79153),m=r(43523),p=r(78667);const b=(e,t)=>Math.floor(Math.random()*(t-e+1))+e;const g=function(e){return e[b(0,e.length-1)]};var v=r(40433),f=r(42914);const x=()=>{var e=(0,i.useState)({clientX:0,clientY:0}),t=s()(e,2),r=t[0],a=t[1],n=(0,f.Z)((e=>{var t=e.clientX,r=e.clientY;a({clientX:t,clientY:r})}),100);return(0,i.useEffect)((()=>(document.addEventListener("mousemove",n,!1),document.addEventListener("mouseenter",n,!1),()=>{document.removeEventListener("mousemove",n),document.removeEventListener("mouseenter",n),n.cancel()})),[]),r};var w=r(6790);const y={scoreboard:"PMWro",scoreCategory:"M6jBU",hidden:"t7fs2"};var T=r(2629);const k=function(e){var t=e.numSummoned,r=e.numFriends,a=e.numBeloved,n=e.numCaptured,l=(0,p.bp)()._c,c=(0,i.useState)(!0),u=s()(c,2),d=u[0],h=u[1];return t?(0,T.jsxs)("div",{className:o()(y.scoreboard,{[y.hidden]:!d}),onClick:()=>h(!d),onKeyDown:e=>{e.key===w.SV.Enter&&h(!d)},role:"button",tabIndex:0,children:[t>0&&(0,T.jsxs)("div",{className:y.scoreCategory,children:[(0,T.jsx)("p",{children:l("[TumblrMart crab widget]: Label for displaying total number of summoned crabs","summoned:")}),(0,T.jsx)("span",{className:y.score,children:t})]}),null!==n&&(0,T.jsxs)("div",{className:y.scoreCategory,children:[(0,T.jsx)("p",{children:l("[TumblrMart crab widget]: Label for displaying total number of captured crabs","captured:")}),(0,T.jsx)("span",{className:y.score,children:n})]}),null!==r&&(0,T.jsxs)("div",{className:y.scoreCategory,children:[(0,T.jsx)("p",{children:l("[TumblrMart crab widget]: Label for displaying total number of friend crabs","befriended:")}),(0,T.jsx)("span",{className:y.score,children:r})]}),null!==a&&(0,T.jsxs)("div",{className:y.scoreCategory,children:[(0,T.jsx)("p",{children:l("[TumblrMart crab widget]: Label for displaying total number of crabs that have fallen in love with the user","beloved:")}),(0,T.jsx)("span",{className:y.score,children:a})]})]}):null};var j=r(54138),S=r.n(j),C=r(54589),P=r.n(C),N=r(79615),M=r(22790),Z=r(65214),L=r(5700);const B="ZFczK";var F=["className"];function A(e){var t=e._c,r=e._cn,a=e.numSummoned,s=e.numFriends,n=e.numBeloved,o=e.numCaptured,i=a&&o&&!s&&!n,l=a&&o&&o>=a,c=a&&s&&!o&&!n&&s>=a,u=a&&n&&!o&&!s&&n>=a;if(a){if(a&&!o&&!s&&!n)return[{type:L.kH.Text,text:r("[TumblrMart crab widget]: Share post copy when only summoned crabs.","today i summoned a crab! it is a good day","today i summoned %1$s crabs! look at them!",a)},..._({_c:t,showTitle:!1,numSummoned:a})];if(i)return l?[{type:L.kH.Text,text:r("[TumblrMart crab widget]: Share post copy when user caught all summoned crabs.","today i summoned one crab and then caught it ðŸ’°","today i summoned %1$s crabs and then caught all of them! what a harvest",a)},...a>1?_({_c:t,showTitle:!1,numCaptured:o}):[]]:[{type:L.kH.Text,text:t("[TumblrMart crab widget]: Share post copy when user caught some of summoned crabs.","today i summoned %1$s crabs and caught %2$s ðŸ’° of them. look at them all!",[String(a),String(o)])},..._({_c:t,showTitle:!1,numSummoned:a,numCaptured:o})];if(c)return[{type:L.kH.Text,text:r("[TumblrMart crab widget]: Share post copy when user is friends with all summoned crabs.","today i summoned one crab and became best friends with it. it's just me and my crab friend against the world! ðŸ¦€ðŸŒ¼","today i summoned %1$s crabs and became friends with all of them ðŸ¥° look at my new friends!!",a)},...a>1?_({_c:t,showTitle:!1,numFriends:s}):[]];if(u)return[{type:L.kH.Text,text:r("[TumblrMart crab widget]: Share post copy when user summoned crabs and all of them fell in love with user.","today i summoned one crab and then we fell in love ðŸ¦€ðŸ’™ crab my beloved","today i summoned %1$s crabs and they all fell in love with me. i love them too.",a)},...a>1?_({_c:t,showTitle:!1,numBeloved:n}):[]];var d=[r("[Tumblrmart crab widget]: Share post copy.","today i summoned one crab!","today i summoned %1$s crabs!",a)];return o&&d.push(r("[TumblrMart crab widget]: Share post copy.","i caught one ðŸ’° of them.","i caught %1$s ðŸ’° of them.",o)),s&&d.push(r("[TumblrMart crab widget]: Share post copy.","i became friends with one ðŸŒ¼ of them.","i became friends with %1$s ðŸŒ¼ of them.",s)),n&&d.push(r("[TumblrMart crab widget]: Share post copy.","one fell in love with me ðŸ’™","%1$s fell in love with me ðŸ’™",n)),[{type:L.kH.Text,text:d.join(" ")},..._({_c:t,numSummoned:a,numFriends:s,numBeloved:n,numCaptured:o})]}return[{type:L.kH.Text,text:t("[TumblrMart crab widget]: Share post copy when no crabs summoned.","it is time for crab on tumblr, but not time for crab in my life. yet.")}]}function E(e){return[{type:L.kH.Text,text:g(e)}]}function H(e,t){return Array(t>=0?t:0).fill(e).join(" ")}function _(e){var t=e._c,r=e.showTitle,a=void 0===r||r,s=e.numSummoned,n=void 0===s?0:s,o=e.numFriends,i=void 0===o?0:o,l=e.numBeloved,c=void 0===l?0:l,u=e.numCaptured,d=void 0===u?0:u,h=n-d-c-i,m=H("ðŸ¦€ðŸ’™",c),p=H("ðŸ¦€ðŸŒ¼",i),b=H("ðŸ¦€",h),g=H("ðŸ’°",d),v=[];a&&v.push({type:L.kH.Text,subtype:L.lr.Quirky,text:t("[TumblrMart crab widget]: Share post group picture title. Must be a litle silly and excitable.","group picture!!!")});var f=[];return m&&f.push(m),p&&f.push(p),b&&f.push(b),g&&f.push(g),f.length&&v.push({type:L.kH.Text,subtype:L.lr.Quirky,text:f.join(" ")}),v}function O(e){var t=e.className,r=P()(e,F);return(0,T.jsx)(N.Z,S()(S()({},r),{},{wrapperClassName:o()(B,t),children:(0,T.jsx)(M.Z,{})}))}const I=function(e){var t=e.numSummoned,r=e.numFriends,a=e.numBeloved,s=e.numCaptured,n=(0,p.bp)(),o=n._c,i=n._cn,c=n.logEvent,u=(0,l.s0)(),d=o("[TumblrMart crab widget]: Button that shares your crab scores as a new post","Share your crab counts!");return(0,T.jsx)(O,{title:d,onClick:()=>{var e={content:[{type:L.kH.Text,subtype:L.lr.Heading1,text:o("[TumblrMart crab widget]: Share post title","ðŸ¦€ time for crab ðŸ¦€")},...E([o("[TumblrMart crab widget]: Share post copy. Intro content text.","Due to unforeseen circumstances, this post will be brought to you solely by crabs."),o("[TumblrMart crab widget]: Share post copy. Intro content text.","Whatâ€™s that coming over the dash? Is it a monster? No. Itâ€™s just a crab ðŸ¦€"),o("[TumblrMart crab widget]: Share post copy. Intro content text.","*clack clack clack* Itâ€™s crab time *clack clack clack*")]),...A({_c:o,_cn:i,numSummoned:t,numFriends:r,numBeloved:a,numCaptured:s}),...E([o("[TumblrMart crab widget]: Share post copy. Closing content text.","just me and my crab army *clack clack clack* ðŸ¦€"),o("[TumblrMart crab widget]: Share post copy. Closing content text.","i summoned some new orange friends ðŸ¦€")])],isPrefilledPost:!0,disableBlogSelection:!1,tags:["time for crab","crab time","crustacean nation","crab","clack"]};c({eventName:m.J.CrabsScoreboardShare}),u((0,Z.TL)({postType:L.hQ.Text}),{state:{newPost:e}})},className:B})},W="n4ng3",R="o7Esz",D="rxrOL",z="y5_hQ",q="JljDF",U="vqBle",G="ovjCT",J="GmAPq",K="WxeRb",Q="Acwsj";var Y=0,$=100,V=[[-1,-1],[-1,0],[0,-1],[0,1],[1,0],[1,1],[-1,1],[1,-1]],X="crab_counts";function ee(e){return e>=10}function te(e,t,r){var a=b(-1,1);if(0!==a){var s=e+a*t;s<$?a=b(0,1):s>=r&&(a=b(-1,0))}return a}function re(e,t,r,a){var s=e+t*r;return s<$||s>=a}function ae(e){return(null!=e?e:0)-1}function se(e){return(null!=e?e:0)+1}function ne(e){var t=e.id,r=e.onClick,a=e.onFriend,n=e.onLove,l=(0,p.bp)(),c=l._t,u=l._c,d=(0,i.useState)(b(400,1e3)),h=s()(d,1)[0],m=(0,i.useState)(b(20,79)),v=s()(m,1)[0],f=window.innerWidth-$,w=window.innerHeight-$,y=(0,i.useState)([b(0,ae(f)),b(0,ae(w))]),k=s()(y,2),j=k[0],S=k[1],C=x(),P=g(V),N=(0,i.useState)(P[0]),M=s()(N,2),Z=M[0],L=M[1],B=(0,i.useState)(P[1]),F=s()(B,2),A=F[0],E=F[1],H=(0,i.useState)(0),_=s()(H,2),O=_[0],I=_[1],W=(0,i.useState)(0),R=s()(W,2),D=R[0],z=R[1],Y=(0,i.useState)(!1),X=s()(Y,2),ne=X[0],oe=X[1],ie=(0,i.useState)(!1),le=s()(ie,2),ce=le[0],ue=le[1],de=(0,i.useState)(!1),he=s()(de,2),me=he[0],pe=he[1],be=(0,i.useState)(""),ge=s()(be,2),ve=ge[0],fe=ge[1],xe=(0,i.useState)(!1),we=s()(xe,2),ye=we[0],Te=we[1],ke=(0,i.useRef)(),je=(0,i.useRef)();(0,i.useEffect)((()=>{if(!me&&!ce)return ke.current=setInterval((()=>{var e=s()(j,2),t=e[0],r=e[1],a=Z,n=A,o=O>5&&Math.random()>.5;(o||re(t,a,v,f))&&(a=te(t,v,f),L(a)),(o||re(r,n,v,w))&&(n=te(r,v,w),E(n)),S([t+Z*v,r+A*v]),I(o?0:se(O))}),h),()=>clearInterval(ke.current)}),[j,Z,A,D,v,O]),(0,i.useEffect)((()=>{var e,t=new RegExp(c("Avatar"),"i"),r=null===(e=document)||void 0===e?void 0:e.elementFromPoint(...j),a=null==r?void 0:r.tagName.toLowerCase(),s=((null==r?void 0:r.getAttribute("data-crab-label"))||"").toLowerCase();if(s)fe(s);else if("img"===a){var n=((null==r?void 0:r.getAttribute("alt"))||"").toLowerCase();n&&n.match(t)?fe(u("[TumblrMart crab widget]: What a crab says when it walks on top of a blog name or avatar.","friend?")):n&&fe(n)}else if("a"===a){var o=(null==r?void 0:r.getAttribute("href"))||"";if(o.match(/\/tagged\//)){var i=(null==r?void 0:r.textContent)||"";i.match(/\bc+r+a+b+\b/i)?fe(u('[TumblrMart crab widget]: What a crab says when it walks on top of a tag link that contains "crab".',"about me?")):i.match(/ðŸ¦€/i)?fe(u("[TumblrMart crab widget]: What a crab says when it walks on top of a tag link that contains a crab emoji.","me??")):fe(u("[TumblrMart crab widget]: What a crab says when it walks on top of a tag link.","tag"))}else o.match(/^https:\/\/.+\.tumblr.com\//)?fe(u("[TumblrMart crab widget]: What a crab says when it walks on top of a blog name or avatar.","friend?")):fe(u("[TumblrMart crab widget]: What a crab says when it walks on top of a link.","link"))}else fe("video"===a?u("[TumblrMart crab widget]: What a crab says when it walks on top of a video.","video"):"")}),[j]),(0,i.useEffect)((()=>{if(!me&&ce)return ke.current=setInterval((()=>{var e,t,r,a,n=C.clientX,o=C.clientY,i=s()(j,2),l=i[0],c=i[1],d=20;if(l+42<n-d?(e=1,r=n-d-l-42):l>n+d?(e=-1,r=l-n-d):(e=0,r=0),c+42<o-d?(t=1,a=o-d-c-42):c>o+d?(t=-1,a=c-o-d):(t=0,a=0),L(e),E(t),0===e&&0===t)fe(u("[TumblrMart crab widget]: What a beloved crab says when it meets you","love <3"));else{var h=l+e*Math.min(r,v),m=c+t*Math.min(a,v);S([h,m])}}),.75*h),()=>clearInterval(ke.current)}),[j,Z,A,D,v,C]);var Se=()=>{if(!ye){var e=D,t=se(e);!ce&&function(e){return e>=25}(t)?(oe(!1),ue(!0),n()):!ee(e)&&ee(t)&&(oe(!0),a()),z(t)}},Ce=()=>{ye||me||(pe(!0),setTimeout((()=>r(t)),3e3)),ke.current&&clearInterval(ke.current)};return(0,T.jsx)("div",{className:o()(q,{[J]:ne&&!ce,[K]:ce,[G]:me,[U]:!!ve}),"data-css-text-hand":u("[TumblrMart crab widget]: What a crab says when you hover over it","hand"),"data-css-text-friend":u("[TumblrMart crab widget]: What a friend crab says when you hover over it","friend <3"),"data-css-text-love":u("[TumblrMart crab widget]: What a beloved crab says when it meets you","love <3"),"data-speech":ve,"data-testid":"crab-wrapper",style:{transform:"translate(".concat(j[0],"px, ").concat(j[1],"px)")},children:(0,T.jsx)("button",{"aria-label":u("[TumblrMart crab widget]: Label for interactive crab","Interactive crab"),className:Q,onClick:Ce,onMouseEnter:Se,onTouchStart:()=>{if(ye)return clearTimeout(je.current),Te(!1),Ce();je.current=setTimeout((()=>{Te(!1),Se()}),300),Te(!0)},children:me?(0,T.jsx)("span",{role:"img","aria-label":u("[TumblrMart crab widget]: Label for a crab that has been caught","Crab in a bag"),children:"ðŸ’°"}):(0,T.jsx)("span",{role:"img","aria-label":u("[TumblrMart crab widget]: Label for a crab","Crab"),children:"ðŸ¦€"})})})}function oe(e){var t,r=e.crabs,a=e.onFriendCrab,s=e.onLoveCrab,n=e.onDismissCrab;return"undefined"!=typeof window?(0,h.createPortal)((0,T.jsx)("div",{"data-testid":"crab-wall",className:z,children:r.map((e=>(0,T.jsx)(ne,{id:e.id,onClick:n,onFriend:a,onLove:s},e.id)))}),null===(t=document)||void 0===t?void 0:t.body):null}const ie=function(){var e=(0,p.bp)(),t=e._c,r=e.logEvent,a=(0,i.useState)([]),n=s()(a,2),o=n[0],l=n[1],c=(0,i.useState)(null),u=s()(c,2),d=u[0],h=u[1],b=(0,i.useState)(null),g=s()(b,2),f=g[0],x=g[1],w=(0,i.useState)(null),y=s()(w,2),j=y[0],S=y[1],C=(0,i.useState)(null),P=s()(C,2),N=P[0],M=P[1],Z=(0,i.useRef)();(0,i.useEffect)((()=>(window.addEventListener("beforeunload",L),()=>{L(),window.removeEventListener("beforeunload",L)})),[]),(0,i.useEffect)((()=>{Z.current={numBefriended:null!=d?d:0,numBeloved:null!=f?f:0,numCaptured:null!=j?j:0,numSummoned:null!=N?N:0}}),[d,f,j,N]);var L=()=>{var e;if(null!==(e=Z.current)&&void 0!==e&&e.numSummoned&&(0,v.f)()){var t=localStorage.getItem(X),r=t?JSON.parse(t):{befriended:0,beloved:0,captured:0,summoned:0},a=r.befriended,s=r.beloved,n=r.captured,o=r.summoned,i=Z.current,l=i.numBefriended,c=i.numBeloved,u=i.numCaptured,d=i.numSummoned;localStorage.setItem(X,JSON.stringify({befriended:a+l,beloved:s+c,captured:n+u,summoned:o+d}))}},B=t("[TumblrMart crab widget]: What the crab says when it steps on the Summon Crab button.","click please");return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)("div",{className:W,children:[(0,T.jsxs)("div",{className:R,children:[(0,T.jsx)("button",{className:D,onClick:()=>{l([...o,{id:Y++}]),M((e=>se(e))),r({eventName:m.J.CrabSummoned})},"data-crab-label":B,children:t("[TumblrMart crab widget]: Button that produces a crab on click","Summon Crab!")}),N&&(0,T.jsx)(I,{numBeloved:null!=f?f:0,numCaptured:null!=j?j:0,numFriends:null!=d?d:0,numSummoned:N})]}),(0,T.jsx)(k,{numBeloved:f,numCaptured:j,numFriends:d,numSummoned:N})]}),(0,T.jsx)(oe,{crabs:o,onDismissCrab:e=>{o.findIndex((t=>t.id===e))>-1&&(S((e=>se(e))),l((t=>{var r=t.findIndex((t=>t.id===e));return r>-1?[...t.slice(0,r),...t.slice(se(r))]:t})))},onFriendCrab:()=>h((e=>se(e))),onLoveCrab:()=>{h((e=>ae(e))),x((e=>se(e)))}})]})};var le=r(78219),ce=r(59464),ue=r(399),de=r(63583);const he="f5gD9";var me=()=>(0,v.f)()&&localStorage.removeItem(X);const pe=e=>{var t=e.status,r=e.uuid,a=e.onExpired,n=(0,p.bp)()._c,o=(0,l.s0)(),h=(0,ce.H)().updateOrderStatus,m=(0,i.useState)(!1),b=s()(m,2),g=b[0],f=b[1],x=(0,i.useState)(null),w=s()(x,2),y=w[0],k=w[1];if((0,i.useEffect)((()=>{t===le.Pt.Completed&&(h(r,le.Pt.Expired),f(!0))}),[]),(0,i.useEffect)((()=>{if(g&&(0,v.f)()){var e=localStorage.getItem(X);e&&k(JSON.parse(e))}}),[g]),(0,i.useEffect)((()=>{if(g&&(0,v.f)())return window.addEventListener("beforeunload",me),()=>{me(),window.removeEventListener("beforeunload",me)}}),[g]),!g)return null;var j,S=y?(0,T.jsx)(T.Fragment,{children:(0,T.jsx)(d.ZP,{comment:"[TumblrMart] Message that appears when a crab gift expires and crab counts are stored in local storage.",params:{befriended:y.befriended,beloved:y.beloved,captured:y.captured,summoned:y.summoned},children:"Your 24 hours of crabs is over. You summoned [summoned] ðŸ¦€, captured [captured] ðŸ’°, befriended [befriended] ðŸŒ¼, and [beloved] fell in love with you ðŸ’œ on the Tumblr web app. Share your time with crabs and we'll get this place cleaned up."})}):(0,T.jsx)(d.ZP,{comment:"[TumblrMart] Message that appears when a crab gift expires and crab counts are not stored in local storage.",children:"Your 24 hours of crabs is over. Write a Tumblr post to say farewell to the glorious crustaceans, and we'll get to work cleaning this place up."}),C=(j=(0,ue.ed)(n),y?{content:[{type:L.kH.Text,subtype:L.lr.Heading1,text:n("[TumblrMart] Pre-filled title of a Tumblr post when a user's crab gift has expired","Farewell Sweet Crabs ðŸ‘‹ ðŸ¦€")},{type:L.kH.Text,text:n("[TumblrMart] Pre-filled text of a Tumblr post when a user's crab gift has expired and crab counts can be read from local storage.","I summoned %1$s ðŸ¦€, captured %2$s ðŸ’°, befriended %3$s ðŸŒ¼, and %4$s fell in love with me ðŸ’œ. I will miss you my sweet crabs.",[y.summoned,y.captured,y.befriended,y.beloved])}],isPrefilledPost:!0,tags:["time for crab"]}:{content:[{type:L.kH.Text,subtype:L.lr.Heading1,text:n("[TumblrMart] Pre-filled title of a Tumblr post when a user's crab gift has expired","Farewell Sweet Crabs ðŸ‘‹ ðŸ¦€")},{type:L.kH.Text,text:n("[TumblrMart] Pre-filled text of a Tumblr post when a user's crab gift has expired and crab counts cannot be read from local storage.","When I remember my crab friends I'll think of:")},{type:L.kH.Text,text:j,formatting:[{type:L.TV.Italic,start:0,end:j.length-1}]}],isPrefilledPost:!0,disableBlogSelection:!1,tags:["time for crab"]});return(0,T.jsxs)(c.Z,{compact:!0,onClose:()=>{f(!1),window.location.reload()},title:n("[TumblrMart] Title shown when the ability to use the crab widget has expired","Oh no! Crab time is up"),children:[(0,T.jsx)("p",{className:he,children:S}),(0,T.jsx)(u.Z,{textColor:de.paletteWhite,size:"entireWidth",onClick:()=>{a(),o((0,Z.TL)({postType:L.hQ.Text},{redirect_to:"/dashboard"}),{state:{newPost:C}})},children:(0,T.jsx)(d.ZP,{comment:"[TumblrMart] Text on a button that will create a Tumblr post sharing expired message.",children:"Share"})})]})};var be=r(62412),ge=r(43684);const ve="H9EdA",fe="qZEjf";const xe=e=>{var t=e.children,r=e.content,a=e.isOpen,n=(0,i.useState)(!1),o=s()(n,2),l=o[0],c=o[1];return(0,i.useEffect)((()=>c(a)),[a,c]),(0,T.jsx)(be.ZP,{arrowWrapperClassName:fe,component:(0,T.jsx)("div",{className:ve,onClick:()=>c(!1),onKeyDown:()=>c(!1),role:"button",tabIndex:0,children:r}),hasArrow:!0,isChromeless:!0,isOpen:l,position:ge.I2.Bottom,toggle:()=>c(!1),children:t})};var we=r(93613),ye=r(74529);const Te=e=>{var t=e.isActive,r=e.component,a=e.onActivate,s=e.onClick,n=e.uuid,o=(0,p.bp)(),i=o._c,l=o.apiFetch,c=(0,ce.H)().setOrder,u=(0,we.V)().toggleToast;return(0,T.jsx)("div",{"data-testid":"tumblrmart-item",onClick:e=>(e=>{t?null==s||s(e):(0,ye.QP)(l,n).fetch().then((t=>{var r=t.response;a(),c(r),null==s||s(e)})).catch((()=>{u(i("error message when summoning a crab fails","Oops. There was an error. Try again."),"error")}))})(e),role:"link",tabIndex:-1,children:r})},ke="aVu3s";const je=e=>{var t=e.className,r=(0,p.bp)(),a=r._c,n=r.logEvent,l=(0,we.V)().toggleToast,c=(0,ce.H)().getHeaderItem,u=(0,i.useState)(!0),d=s()(u,2),h=d[0],b=d[1],g=(0,i.useState)(null),v=s()(g,2),f=v[0],x=v[1],w=(0,i.useState)(""),y=s()(w,2),k=y[0],j=y[1];(0,i.useEffect)((()=>{var e=c();if(e){var t=e.status,r=e.uuid;b(t===le.Pt.Active),x(t),j(r)}}),[c,b,x,j]);return k&&f?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(pe,{status:f,uuid:k,onExpired:()=>{x(null),n({eventName:m.J.CrabShareFarewell})}}),le.hi.includes(f)&&(0,T.jsx)("div",{className:o()(ke,t),children:(0,T.jsx)(xe,{isOpen:!h,content:a("[TumblrMart] Tooltip text for when a user first sees the dashboard crab widget","Summon your crabs ðŸ¦€ Clack!"),children:(0,T.jsx)(Te,{component:(0,T.jsx)(ie,{}),isActive:h,onActivate:()=>{b(!0),l(a("[TumblrMart] Message that appears when crabs gift has been used for the first time","ðŸ¦€ Your 24 hours of crabs has begun! ðŸ¦€"),"success")},uuid:k})})})]}):null}},32089:(e,t,r)=>{var a,s;r.d(t,{Ov:()=>a,p3:()=>s,yS:()=>n}),function(e){e[e.Light=0]="Light",e[e.Transparent=1]="Transparent",e[e.TransparentDark=2]="TransparentDark"}(a||(a={})),function(e){e[e.Color=0]="Color",e[e.Greyscale=1]="Greyscale",e[e.TransparentDark=2]="TransparentDark"}(s||(s={}));var n={[a.Light]:s.Color,[a.Transparent]:s.Color,[a.TransparentDark]:s.TransparentDark}},40433:(e,t,r)=>{function a(){try{return"undefined"!=typeof localStorage}catch(e){return!1}}r.d(t,{f:()=>a})}}]);